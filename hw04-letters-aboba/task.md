# hw04-letters

Домашку можно делать в группах, максимум 4 человека в группе. Все получают одинаковое количество баллов. Возможно, кому-то будет комфортнее делать самостоятельно.  Это не запрещено, но работать в команде -- это полезный навык.

Дедлайн --- конец курса. Но не забывайте, что будет еще 5 домашка.


**Дано:**

Здоровенная картинка. На ней большое количество букв, которые могут быть перевернуты. Выше небольшая часть исходной картинки

**Нужно: посчитать количество раз, которое встречается каждая буква**

```
Для отправки ответа, вам необходимо сформировать файл (`letters.csv`) в следующем формате:
A,11  
C,6  
B,10  
...
```

Так же нужно прикрепить ноутбук, в котором вы решали эту задачу. 

**Оценка работы:**

Если вы неверно определили количество букв на картинке, вы получаете 0 баллов. Всего букв примерно 13к.
Вычисляется ваш `accuracy (?)`. Если вы верно определили количество всех букв, вы получаете 4 балла. Если хотя бы для одной буквы результат неверный, то `result = accuracy * 3`. Если для одной буквы вы сделали неправильное предсказание, то это зааффектило сразу 2 класса (в который вы по ошибке добавили букву и тот класс, в котором эта буква должна была быть), вы получите ` 3 * (26 - 2) / 26 = 2.77 `

Нужно приложить ноутбук, и отдельно файл с вашими результатами.

## С чего начать?

### Предобработка

* От какой избыточной информации можно избавиться в этом изображинии?
* Есть ли какой-то паттерн, какой угол наклона у разных букв?
* Есть ли готовые библиотеки/инструменты, которые умеют распознавать текст на картинках?

### Поиск границ каждой буквы

Нужно построить bounding-box'ы для каждой буквы, найти ее границы. Или после выделения границ буквы можно сохранить эту небольшую картинку в отдельный файл, например.

Всего букв примерно 13к

Можно придумать обычный алгоритм (не стоит использовать нейронки для этой подзадачи)

### Разметка

Нет разметки для датасета. Реально ли разметить все буквы вручную? 

* Сколько букв вы сможете разметить? Убедитесь, все ли буквы алфавита были в вашей разметке? Обычно чем больше, тем лучше. Но чем больше размечаете руками, тем больше вероятность ошибки. 
* Cбалансированы ли классы? Как можно бороться с дисбалансом?
* Чем буква `W` отличается от `M`?
* Какие еще буквы можно перепутать?

### Обучение модели

Обучите классификатор на свертках

* Какие аугментации вы захотите использовать?
* Какие аугментации не стоит использовать?
* Имеет ли смысл использовать предобученную модель? (нет)
* Как вы можете отследить переобучение?

### Анализ результатов

* Что можно сделать, если модель продолжает ошибаться на **небольшом** количестве сэмплов? (Доразметить руками)
* Как можно оценить степень уверенности модели в вашем предсказании?

    Посмотреть на логиты. 

    Или: 1) Сделать 36 копий тестовой картинки. 2) Каждую копию повернуть на 10 градусов. Таким образом получите букву, которая повернута разными возможными способами. 3) Для этих копий получить предсказания. 4) Как итоговое предсказание взять то, которое встречается наиболее часто для разных поворотов. 5) Если видно, что модель предсказывает для разных поворотов разные классы, можно использовать это как признак неуверенности модели в классификации данной буквы.

* Как перевернутость может помочь вам в этой оценке? (в общем-то, ответ уже есть выше)
* Что можно сделать, если качество работы модели вас не устраивает?
* Чтобы увеличить выборку обучающего датасета, можно использовать подходы из `self-supervised` обучения: добавлять в обучающую выборку те данные, для которых модель на этапе тестирования выдала наибольшую уверенность в предсказании

